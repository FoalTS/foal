"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3219],{87844:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var n=r(74848),o=r(28453);const a={title:"API Testing with Swagger",id:"tuto-6-swagger-interface",slug:"6-swagger-interface"},s=void 0,i={id:"tutorials/real-world-example-with-react/tuto-6-swagger-interface",title:"API Testing with Swagger",description:"Now that the first API endpoint has been implemented, the next step is to test it.",source:"@site/versioned_docs/version-2.x/tutorials/real-world-example-with-react/6-swagger-interface.md",sourceDirName:"tutorials/real-world-example-with-react",slug:"/tutorials/real-world-example-with-react/6-swagger-interface",permalink:"/docs/2.x/tutorials/real-world-example-with-react/6-swagger-interface",draft:!1,unlisted:!1,editUrl:"https://github.com/FoalTS/foal/edit/master/docs/versioned_docs/version-2.x/tutorials/real-world-example-with-react/6-swagger-interface.md",tags:[],version:"2.x",sidebarPosition:6,frontMatter:{title:"API Testing with Swagger",id:"tuto-6-swagger-interface",slug:"6-swagger-interface"},sidebar:"someSidebar",previous:{title:"Your First Route",permalink:"/docs/2.x/tutorials/real-world-example-with-react/5-our-first-route"},next:{title:"The Frontend App",permalink:"/docs/2.x/tutorials/real-world-example-with-react/7-add-frontend"}},l={},c=[];function p(e){const t={a:"a",code:"code",em:"em",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Now that the first API endpoint has been implemented, the next step is to test it."}),"\n",(0,n.jsxs)(t.p,{children:["To do this, you will generate a complete documentation page of your API from which you can send requests. This page will be generated using ",(0,n.jsx)(t.a,{href:"https://swagger.io/tools/swagger-ui/",children:"Swagger UI"})," and the ",(0,n.jsx)(t.a,{href:"https://github.com/OAI/OpenAPI-Specification/",children:"OpenAPI specification"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm install @foal/swagger\n"})}),"\n",(0,n.jsx)(t.p,{children:"First, provide some information to describe your API globally."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import { ApiInfo, ApiServer, controller } from '@foal/core';\nimport { StoriesController } from './api';\n\n@ApiInfo({\n  title: 'Application API',\n  version: '1.0.0'\n})\n@ApiServer({\n  url: '/api'\n})\nexport class ApiController {\n\n  subControllers = [\n    controller('/stories', StoriesController),\n  ];\n\n}\n\n"})}),"\n",(0,n.jsx)(t.p,{children:"Then generate a new controller. This one will be in charge of rendering the new page."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"foal generate controller openapi --register\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Make the generated class extend the abstract class ",(0,n.jsx)(t.code,{children:"SwaggerController"}),". And then provide the root controller of your API as an option to the controller."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import { SwaggerController } from '@foal/swagger';\nimport { ApiController } from './api.controller';\n\nexport class OpenapiController extends SwaggerController  {\n\n  options = {\n    controllerClass: ApiController\n  }\n\n}\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Finally, update your ",(0,n.jsx)(t.code,{children:"app.controller.ts"})," file so that the Swagger UI page is available at ",(0,n.jsx)(t.a,{href:"http://localhost:3001/swagger",children:"/swagger"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import { controller, IAppController } from '@foal/core';\nimport { createConnection } from 'typeorm';\n\nimport { ApiController, OpenapiController } from './controllers';\n\nexport class AppController implements IAppController {\n  subControllers = [\n    controller('/api', ApiController),\n    controller('/swagger', OpenapiController)\n  ];\n\n  async init() {\n    await createConnection();\n  }\n}\n\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you navigate to ",(0,n.jsx)(t.a,{href:"http://localhost:3001/swagger",children:"http://localhost:3001/swagger"}),", you will see the documentation page generated from your code."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Swagger page",src:r(21522).A+"",width:"2560",height:"1394"})}),"\n",(0,n.jsxs)(t.p,{children:["Now click on the ",(0,n.jsx)(t.em,{children:"Try it out"})," button. The fields become editable and you can send requests to test your API."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Swagger page",src:r(69705).A+"",width:"2560",height:"1386"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},21522:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/swagger1-3abe32cd345086f35f191e1284daa45e.png"},69705:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/swagger2-a7c73effa7473d646ed981f1f55acd4f.png"},28453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>i});var n=r(96540);const o={},a=n.createContext(o);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);