"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[78587],{17882:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"architecture/architecture-overview","title":"Architecture Overview","description":"FoalTS is a framework for creating server-side Node.js applications. It is written in TypeScript, a typed superset of JavaScript that provides advanced development tools and the latest language features.","source":"@site/versioned_docs/version-1.x/architecture/architecture-overview.md","sourceDirName":"architecture","slug":"/architecture/architecture-overview","permalink":"/id/docs/1.x/architecture/architecture-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/FoalTS/foal/edit/master/docs/versioned_docs/version-1.x/architecture/architecture-overview.md","tags":[],"version":"1.x","frontMatter":{"title":"Architecture Overview"},"sidebar":"someSidebar","previous":{"title":"Unit Testing","permalink":"/id/docs/1.x/tutorials/mongodb-todo-list/tuto-7-unit-testing"},"next":{"title":"Controllers","permalink":"/id/docs/1.x/architecture/controllers"}}');var o=n(74848),s=n(28453);const i={title:"Architecture Overview"},c=void 0,l={},a=[{value:"Controllers",id:"controllers",level:2},{value:"Services",id:"services",level:2},{value:"Hooks",id:"hooks",level:2},{value:"A Simple Application",id:"a-simple-application",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["FoalTS is a framework for creating server-side ",(0,o.jsx)(t.a,{href:"https://nodejs.org",children:"Node.js"})," applications. It is written in ",(0,o.jsx)(t.a,{href:"https://www.typescriptlang.org/",children:"TypeScript"}),", a typed superset of JavaScript that provides advanced development tools and the latest language features."]}),"\n",(0,o.jsx)(t.p,{children:"FoalTS architecture is organized around three main components: controllers, services and hooks."}),"\n",(0,o.jsx)(t.h2,{id:"controllers",children:"Controllers"}),"\n",(0,o.jsx)(t.p,{children:"Controllers are classes instantiated as singletons. Their methods process the incoming HTTP requests."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { Get, HttpResponseOK } from '@foal/core';\n\nclass AppController {\n\n  @Get('/')\n  index() {\n    return new HttpResponseOK('Hello world!');\n  }\n\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"services",children:"Services"}),"\n",(0,o.jsx)(t.p,{children:"Services are also classes instantiated as singletons. They are used by the controllers (or hooks) to perform specific tasks."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { dependency, Get, HttpResponseOK } from '@foal/core';\n\nclass AppController {\n  @dependency\n  logger: Logger;\n\n  @Get('/')\n  index() {\n    this.logger.log('index has been called!');\n    return new HttpResponseOK('Hello world!');\n  }\n\n}\n\nclass Logger {\n  log(message: string) {\n    console.log(`${new Date()} - ${message}`);\n  }\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"hooks",children:"Hooks"}),"\n",(0,o.jsx)(t.p,{children:"Hooks are small functions that add extra logic before or after the execution of a controller method."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { Get, HttpResponseOK } from '@foal/core';\nimport { JWTRequired } from '@foal/jwt';\n\nclass AppController {\n\n  @Get('/')\n  @JWTRequired()\n  index() {\n    return new HttpResponseOK('Hello world!');\n  }\n\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"a-simple-application",children:"A Simple Application"}),"\n",(0,o.jsx)(t.p,{children:"Controllers may have sub-controllers. Hooks can be attached to the controllers or their methods."}),"\n",(0,o.jsx)(t.p,{children:"Here's an example of what a FoalTS application may look like."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { Context, Get, HttpResponseNotFound, HttpResponseOK, Log } from '@foal/core';\nimport { JWTRequired } from '@foal/jwt';\n\n@JWTRequired()\nclass ApiController {\n  private products = [\n    { id: 1, name: 'phone' },\n    { id: 2, name: 'computer' },\n  ]\n\n  @Get('/products')\n  listProducts() {\n    return new HttpResponseOK(this.products);\n  }\n\n  @Get('/products/:id')\n  getProduct(ctx: Context) {\n    const product = this.products.findOne(\n      p => p.id === ctx.request.params.id\n    );\n\n    if (!product) {\n      return new HttpResponseNotFound();\n    }\n\n    return new HttpResponseOK(product);\n  }\n}\n\n@Log('Receiving a request...')\nclass AppController {\n  subControllers = [\n    controller('/api', ApiController)\n  ];\n\n  @Get('/')\n  index() {\n    return new HttpResponseOK('Welcome!');\n  }\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Request Lifecycle",src:n(43259).A+"",width:"677",height:"359"})})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var r=n(96540);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}},43259:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/request_lifecycle-6483154b08c8a22d7412d0fa953a7304.png"}}]);