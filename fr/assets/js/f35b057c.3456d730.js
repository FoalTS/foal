"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1012],{40914:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>p,toc:()=>i});var o=r(74848),n=r(28453);const t={title:"ExpressJS"},a=void 0,p={id:"cookbook/expressjs",title:"ExpressJS",description:"FoalTS applications are created with the createApp function in the src/index.ts file. This function takes the root controller class (known as AppController) as parameter.",source:"@site/versioned_docs/version-1.x/cookbook/expressjs.md",sourceDirName:"cookbook",slug:"/cookbook/expressjs",permalink:"/fr/docs/1.x/cookbook/expressjs",draft:!1,unlisted:!1,editUrl:"https://github.com/FoalTS/foal/edit/master/docs/versioned_docs/version-1.x/cookbook/expressjs.md",tags:[],version:"1.x",frontMatter:{title:"ExpressJS"},sidebar:"someSidebar",previous:{title:"Request Body Size",permalink:"/fr/docs/1.x/cookbook/request-body-size"},next:{title:"Root Imports",permalink:"/fr/docs/1.x/cookbook/root-imports"}},c={},i=[{value:"Custom Express Instance",id:"custom-express-instance",level:2},{value:"Pre and Post Express Middlewares",id:"pre-and-post-express-middlewares",level:2},{value:"Migrating from Express to FoalTS",id:"migrating-from-express-to-foalts",level:2}];function l(e){const s={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["FoalTS applications are created with the ",(0,o.jsx)(s.code,{children:"createApp"})," function in the ",(0,o.jsx)(s.code,{children:"src/index.ts"})," file. This function takes the root controller class (known as ",(0,o.jsx)(s.code,{children:"AppController"}),") as parameter."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"import { createApp } from '@foal/core';\n\nconst app = createApp(AppController);\n"})}),"\n",(0,o.jsxs)(s.p,{children:["The returned value is an ExpressJS application that can be used as is to create an HTTP server. ",(0,o.jsx)(s.strong,{children:"FoalTS is not designed to integrate Express middlewares in its controllers or hooks"}),". However, if for any reason you need to apply globally a middleware to the application, you have two ways to do it."]}),"\n",(0,o.jsx)(s.h2,{id:"custom-express-instance",children:"Custom Express Instance"}),"\n",(0,o.jsxs)(s.p,{children:["You can provide your own express instance to ",(0,o.jsx)(s.code,{children:"createApp"}),"."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"import { createApp } from '@foal/core';\nimport * as express from 'express';\n\nconst expressApp = express();\nexpressApp.use(/* an Express middleware */)\n\nconst app = createApp(AppController, expressApp);\n// OR\nconst app = createApp(AppController, {\n  expressInstance: expressApp\n});\n\n"})}),"\n",(0,o.jsx)(s.h2,{id:"pre-and-post-express-middlewares",children:"Pre and Post Express Middlewares"}),"\n",(0,o.jsxs)(s.p,{children:["You can also pass global Express middlewares as options to the ",(0,o.jsx)(s.code,{children:"createApp"})," function."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"import { createApp } from '@foal/core';\nimport * as rateLimit from 'express-rate-limit';\n\nconst app = createApp(AppController, {\n  preMiddlewares: [\n    /* Express middlewares */\n  ],\n  postMiddlewares: [\n    /* Express middlewares */\n  ]\n});\n"})}),"\n",(0,o.jsx)(s.p,{children:"Pre-middlewares are executed before Foal's controllers and hooks. Post-middlewares are executed only if there was no controller to handle the request, but before the 500 or 404 handlers get called."}),"\n",(0,o.jsx)(s.h2,{id:"migrating-from-express-to-foalts",children:"Migrating from Express to FoalTS"}),"\n",(0,o.jsxs)(s.p,{children:["In case your are migrating your ExpressJS application to FoalTS, you can access FoalTS service manager using ",(0,o.jsx)(s.code,{children:"app.foal.services"}),"."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"import { createApp } from '@foal/core';\n\nconst app = createApp(AppController);\napp.foal.services.get(MyServiceClass).doSomething();\n"})})]})}function d(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>p});var o=r(96540);const n={},t=o.createContext(n);function a(e){const s=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function p(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);